<div class="container">
  <div class="row">
    <div class="col-xs-12">
      <!-- Tab Navigation -->
      <ul class="nav nav-tabs" id="userTabs" role="tablist">
        <li class="nav-item">
          <a
            class="nav-link active"
            id="myrecipes-tab"
            data-toggle="tab"
            href="#myrecipes"
            role="tab"
            aria-controls="myrecipes"
            aria-selected="true"
          >
            ğŸ“ My Recipes ({{ recipes|length }})
          </a>
        </li>
        <li class="nav-item">
          <a
            class="nav-link"
            id="community-tab"
            data-toggle="tab"
            href="#community"
            role="tab"
            aria-controls="community"
            aria-selected="false"
          >
            ğŸŒŸ All Recipes
          </a>
        </li>
      </ul>

      <!-- Tab Content -->
      <div class="tab-content" id="userTabsContent">
        <!-- My Recipes Tab -->
        <div
          class="tab-pane fade show active"
          id="myrecipes"
          role="tabpanel"
          aria-labelledby="myrecipes-tab"
        >
          <h3 class="mt-3">ğŸ“ My Recipes</h3>
          {% if recipes %} {% for recipe in recipes %} {% include
          'includes/recipe_card.html' %} {% endfor %} {% else %}
          <div class="no-recipes">
            <h4>You haven't added any recipes yet!</h4>
            <p>Share your creations with others.</p>
            <a href="{{ url_for('add_recipe') }}" class="btn btn-primary"
              >Add Your First Recipe</a
            >
          </div>
          {% endif %}

          <!-- Quick Stats -->
          <div class="row mt-4">
            <div class="col-md-4">
              <div class="stats-well">
                <h4>Total Recipes</h4>
                <h3>{{ recipes|length }}</h3>
              </div>
            </div>
            <div class="col-md-4">
              <div class="stats-well">
                <h4>Approved</h4>
                <h3>
                  {{ recipes|selectattr('status', 'equalto',
                  'approved')|list|length }}
                </h3>
              </div>
            </div>
            <div class="col-md-4">
              <div class="stats-well">
                <h4>Pending</h4>
                <h3>
                  {{ recipes|selectattr('status', 'equalto',
                  'pending')|list|length }}
                </h3>
              </div>
            </div>
          </div>
        </div>

        <!-- Community Tab -->
        <div
          class="tab-pane fade"
          id="community"
          role="tabpanel"
          aria-labelledby="community-tab"
        >
          <h3 class="mt-3">ğŸŒŸ All Recipes</h3>
          <p>Discover amazing recipes from others!</p>

          {% if community_recipes %} {% for recipe in community_recipes %}
          <div class="recipe-card community-recipe">
            <div class="recipe-image">
              {% if recipe.image_path %}
              <img
                src="{{ url_for('static', filename=recipe.image_path) }}"
                alt="{{ recipe.title }}"
              />
              {% else %}
              <div class="no-image">No Image</div>
              {% endif %}
            </div>
            <h4><strong>{{ recipe.title }}</strong></h4>
            <p><strong>By:</strong> {{ recipe.username.capitalize() }}</p>
            <p><strong>Category:</strong> {{ recipe.category }}</p>
            {% if recipe.avg_rating %}
            <p>
              <strong>Rating:</strong> â­ {{ "%.1f"|format(recipe.avg_rating)
              }}/5
            </p>
            {% endif %}
            <p><strong>Ingredients:</strong> {{ recipe.ingredients }}</p>
            <p><strong>Steps:</strong> {{ recipe.steps }}</p>

            <div>
              <a
                href="{{ url_for('view_recipe', recipe_id=recipe.id) }}"
                class="btn btn-info btn-sm btn-action"
                >ğŸ‘€ View Details</a
              >
              <a
                href="{{ url_for('add_review', recipe_id=recipe.id) }}"
                class="btn btn-success btn-sm btn-action"
                >â­ Rate & Review</a
              >
            </div>
          </div>
          {% endfor %} {% else %}
          <div class="alert alert-info">
            <p>No community recipes available yet. Be the first to share!</p>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
